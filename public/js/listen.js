"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[771],{44:()=>{function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,r,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.toStringTag||"@@toStringTag";function c(t,i,o,a){var c=i&&i.prototype instanceof s?i:s,f=Object.create(c.prototype);return n(f,"_invoke",function(t,n,i){var o,a,c,s=0,f=i||[],l=!1,p={p:0,n:0,v:e,a:y,f:y.bind(e,4),d:function(t,n){return o=t,a=0,c=e,p.n=n,u}};function y(t,n){for(a=t,c=n,r=0;!l&&s&&!i&&r<f.length;r++){var i,o=f[r],y=p.p,h=o[2];t>3?(i=h===n)&&(c=o[(a=o[4])?5:(a=3,3)],o[4]=o[5]=e):o[0]<=y&&((i=t<2&&y<o[1])?(a=0,p.v=n,p.n=o[1]):y<h&&(i=t<3||o[0]>n||n>h)&&(o[4]=t,o[5]=n,p.n=h,a=0))}if(i||t>1)return u;throw l=!0,n}return function(i,f,h){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&y(f,h),a=f,c=h;(r=a<2?e:c)||!l;){o||(a?a<3?(a>1&&(p.n=-1),y(a,c)):p.n=c:p.v=c);try{if(s=2,o){if(a||(i="next"),r=o[i]){if(!(r=r.call(o,c)))throw TypeError("iterator result is not an object");if(!r.done)return r;c=r.value,a<2&&(a=0)}else 1===a&&(r=o.return)&&r.call(o),a<2&&(c=TypeError("The iterator does not provide a '"+i+"' method"),a=1);o=e}else if((r=(l=p.n<0)?c:t.call(n,p))!==u)break}catch(t){o=e,a=1,c=t}finally{s=1}}return{value:r,done:l}}}(t,o,a),!0),f}var u={};function s(){}function f(){}function l(){}r=Object.getPrototypeOf;var p=[][o]?r(r([][o]())):(n(r={},o,function(){return this}),r),y=l.prototype=s.prototype=Object.create(p);function h(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,n(e,a,"GeneratorFunction")),e.prototype=Object.create(y),e}return f.prototype=l,n(y,"constructor",l),n(l,"constructor",f),f.displayName="GeneratorFunction",n(l,a,"GeneratorFunction"),n(y),n(y,a,"Generator"),n(y,o,function(){return this}),n(y,"toString",function(){return"[object Generator]"}),(t=function(){return{w:c,m:h}})()}function n(e,t,r,i){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}n=function(e,t,r,i){function a(t,r){n(e,t,function(e){return this._invoke(t,r,e)})}t?o?o(e,t,{value:r,enumerable:!i,configurable:!i,writable:!i}):e[t]=r:(a("next",0),a("throw",1),a("return",2))},n(e,t,r,i)}function r(e,t,n,r,i,o,a){try{var c=e[o](a),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,i)}function i(e){return function(){var t=this,n=arguments;return new Promise(function(i,o){var a=e.apply(t,n);function c(e){r(a,i,o,c,u,"next",e)}function u(e){r(a,i,o,c,u,"throw",e)}c(void 0)})}}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach(function(t){u(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function u(e,t,n){return(t=s(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(t){var n=function(t,n){if("object"!=e(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,n||"default");if("object"!=e(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"==e(n)?n:n+""}var f=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),u(this,"shared",null),u(this,"isPlaying",!1),u(this,"currentMusicID",""),u(this,"progress",0),u(this,"currentPlaybackDuration","00:30"),u(this,"options",{developerToken:"",app:{build:"",icon:"",name:"",version:""}}),u(this,"hasInitEvents",!1),MusicKit.configure(t),this.shared=MusicKit.getInstance()},n=[{key:"initEvents",value:function(){var e=this;if(!this.hasInitEvents){this.hasInitEvents=!0;var t=this.shared.player._currentPlayer.audio;t.addEventListener("play",function(n){e.progress=t.currentTime}),t.addEventListener("timeupdate",function(n){e.progress=t.currentTime,e.currentPlaybackDuration=e.getTime(1e3*e.shared.player.currentPlaybackTimeRemaining)}),t.addEventListener("ended",function(t){e.isPlaying=!1})}}},{key:"createMediaItem",value:function(e){return a(a({},e),{},{container:{id:e.id}})}},{key:"getArtworkURL",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:500;return MusicKit.formatArtworkURL(e.attributes.artwork,t,n)}},{key:"getTime",value:function(e){e&&!isNaN(e)||(e=0);var t=1e3*Math.round(e/1e3),n=new Date(t);return"".concat(String("0".concat(n.getUTCMinutes())).slice(-2),":").concat(String("0".concat(n.getUTCSeconds())).slice(-2))}},{key:"seekTo",value:function(e){this.shared.player.seekToTime(e)}},{key:"setQueueItems",value:(f=i(t().m(function e(n){var r,i=this;return t().w(function(e){for(;;)switch(e.n){case 0:if(0!==(r=n.filter(function(e){return e})).length){e.n=1;break}return e.a(2);case 1:return e.n=2,this.shared.setQueue({items:r.map(function(e){return i.createMediaItem(e)})});case 2:return e.a(2)}},e,this)})),function(e){return f.apply(this,arguments)})},{key:"playSong",value:(s=i(t().m(function e(n){var r=this;return t().w(function(e){for(;;)switch(e.n){case 0:if(!n){e.n=5;break}if(this.currentMusicID!==n.id||!this.shared.player.isPlaying){e.n=1;break}this.shared.player.pause(),this.isPlaying=!1,e.n=4;break;case 1:if(this.currentMusicID!==n.id){e.n=2;break}this.shared.player.play(),this.isPlaying=!0,e.n=4;break;case 2:return e.n=3,this.setQueueItems([n]).then(function(){r.shared.player.play()});case 3:this.isPlaying=!0,this.initEvents();case 4:this.currentMusicID=n.id;case 5:return e.a(2)}},e,this)})),function(e){return s.apply(this,arguments)})},{key:"fetchSong",value:(o=i(t().m(function e(n){return t().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.shared.api.song(n);case 1:return e.a(2,e.v)}},e,this)})),function(e){return o.apply(this,arguments)})}],n&&c(e.prototype,n),r&&c(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n,r,o,s,f}();window.addEventListener("musickitloaded",function(e){window.musicManager=new f({developerToken:"eyJraWQiOiIzOExGSjhTNkJLIiwiYWxnIjoiRVMyNTYifQ.eyJpc3MiOiI0N1pFVTVKNEJGIiwiaWF0IjoxNzYwNzk5MDcyLCJleHAiOjE3NzY1NzYwNzIsImF1ZCI6Imh0dHBzOi8vYXBwbGVpZC5hcHBsZS5jb20iLCJzdWIiOiJhcHAua3Vyb3pvcmEud2ViLnRyYWNrZXIifQ.AncW3WikYYcxnfklBfH0y-0nyj-UviFq61nJ5YgyC9yq45Ocm8lPanTYl7C3Q47tVDxxhFKE1ILDUXG0mGTNIg",app:{build:"1.17.0-alpha.1",icon:"/images/static/icon/app_icon.webp",name:"Kurozora",version:"1.17.0-alpha.1"}}),window.dispatchEvent(new Event("musicmanagerloaded"))})}},e=>{var t;t=44,e(e.s=t)}]);
//# sourceMappingURL=listen.js.map